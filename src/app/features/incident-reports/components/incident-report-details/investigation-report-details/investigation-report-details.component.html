<ng-container *ngIf="incidentReport">
  <location-details [incidentReport]="incidentReport"></location-details>
  <ion-card-header>
    <ion-card-subtitle>Reported By</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    {{ incidentReport.user.name }}
  </ion-card-content>
  <ion-card-header>
    <ion-card-subtitle>Start date</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    {{ incidentReport.startDate | date: "EEE, MMM dd, yyyy" }}
  </ion-card-content>
  <ion-card-header>
    <ion-card-subtitle>End date</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    {{ incidentReport.endDate | date: "EEE, MMM dd, yyyy" }}
  </ion-card-content>
  <ion-card-header>
    <ion-card-subtitle>Created</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    {{ incidentReport.created | date: "EEE, MMM dd, yyyy h:mm a" }}
  </ion-card-content>
  <take-photo-button
    [incidentReport]="incidentReport"
    (uploadSuccededEvent)="onFileUpload()"
  ></take-photo-button>
  <ion-card-header>
    <ion-card-subtitle>Divisions</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <span *ngFor="let division of incidentReport.divisions; let isLast = last">
      {{ division.name }}{{ isLast ? "" : ", " }}
    </span>
  </ion-card-content>
  <ion-card-header>
    <ion-card-subtitle> Name of person(s) concerned </ion-card-subtitle>
  </ion-card-header>
  <ion-list class="ion-no-margin ion-no-padding">
    <ion-item lines="none" *ngFor="let person of incidentReport.persons">
      <ion-grid>
        <ion-col>
          <ion-label>
            <ion-icon
              name="person-outline"
              class="ion-padding-end"
              style="vertical-align: middle"
            >
            </ion-icon>
            <span style="vertical-align: middle">{{ person.name }}</span>
          </ion-label>
        </ion-col>
        <ion-col>
          <ion-label>
            <ion-icon
              name="mail-outline"
              class="ion-padding-end"
              style="vertical-align: middle"
            >
            </ion-icon>
            <span style="vertical-align: middle">{{ person.email }}</span>
          </ion-label>
        </ion-col>
      </ion-grid>
    </ion-item>
  </ion-list>

  <ion-card-header>
    <ion-card-subtitle>Investigator(s)</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <span
      *ngFor="
        let investigator of incidentReport.incidentReportUsers;
        let isLast = last
      "
    >
      {{ investigator.name }}{{ isLast ? "" : ", " }}
    </span>
  </ion-card-content>

  <ion-card-header>
    <ion-card-subtitle>HR Support Link</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <a href="{{ incidentReport.customField1 }}">{{
      incidentReport.customField1
    }}</a>
  </ion-card-content>

  <ion-card-header>
    <ion-card-subtitle>Investigation Support</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    {{ incidentReport.customField2 }}
  </ion-card-content>

  <ion-card-header>
    <ion-card-subtitle>Incident Details</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <ion-textarea
      class="ion-no-padding"
      readonly
      value="{{ incidentReport.description }}"
    ></ion-textarea>
  </ion-card-content>

  <ion-card-header>
    <ion-card-subtitle>External Agency Actions</ion-card-subtitle>
  </ion-card-header>
  <ion-card-content>
    <ion-textarea
      class="ion-no-padding"
      readonly
      value="{{ incidentReport.customField3 }}"
    ></ion-textarea>
  </ion-card-content>

  <ion-card-header>
    <ion-card-subtitle
      >Resulting Crane Currency Actions Taken</ion-card-subtitle
    >
  </ion-card-header>
  <ion-card-content>
    <ion-textarea
      class="ion-no-padding"
      readonly
      value="{{ incidentReport.customField4 }}"
    ></ion-textarea>
  </ion-card-content>
  <incident-report-photos
    [incidentReport]="incidentReport"
    [updateFiles]
  ></incident-report-photos>
</ng-container>
