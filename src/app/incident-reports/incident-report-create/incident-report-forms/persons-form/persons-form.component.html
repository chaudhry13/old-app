<form [formGroup]="personsForm" *ngIf="personsForm && !isDetailed">
    <div formArrayName="persons">
        <div [formGroupName]="i" *ngFor="let item of personsForm.get('persons')['controls']; let i = index;"
            class="ion-margin-top">
            <ion-item-divider>
                <ion-icon style="vertical-align:middle;" name="person-outline"></ion-icon>
                <ion-label style="vertical-align:middle;" class="ion-padding-start">Person {{i + 1}}</ion-label>
                <ion-icon color="danger" slot="end" class="ion-margin-end" *ngIf="i >= 1"
                    (click)="removePersonAtIndex(i)" name="close-circle-outline"></ion-icon>
            </ion-item-divider>
            <ion-item>
                <ion-label position="stacked">Name</ion-label>
                <ion-input type="text" formControlName="name"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label position="stacked">Email</ion-label>
                <ion-input type="email" formControlName="email"></ion-input>
            </ion-item>
        </div>
    </div>
</form>

<form [formGroup]="personsForm" *ngIf="personsForm && isDetailed">
    <div formArrayName="persons">
        <div [formGroupName]="i" *ngFor="let item of personsForm.get('persons')['controls']; let i = index;"
            class="ion-margin-top person">
            <ion-item-divider>
                <ion-icon style="vertical-align:middle;" name="person-outline"></ion-icon>
                <ion-label style="vertical-align:middle;" class="ion-padding-start">Person {{i + 1}}</ion-label>
                <ion-icon color="danger" class="ion-margin-start" *ngIf="i >= 1" (click)="removePersonAtIndex(i)"
                    name="close-circle-outline"></ion-icon>
                <ion-icon (click)="toggleShowOfIndex(i)" class="ion-margin-end" *ngIf="personsShown[i].shown" slot="end"
                    name="chevron-down">
                </ion-icon>
                <ion-icon (click)="toggleShowOfIndex(i)" class="ion-margin-end" *ngIf="!personsShown[i].shown"
                    slot="end" name="chevron-forward">
                </ion-icon>
            </ion-item-divider>
            <div *ngIf="personsShown[i].shown">
                <ion-list>
                    <ion-list-header>
                        Name
                    </ion-list-header>
                    <ion-item>
                        <ion-input type="text" formControlName="name"></ion-input>
                    </ion-item>
                </ion-list>
                <ion-list>
                    <ion-radio-group value="male" formControlName="gender">
                        <ion-list-header>
                            <ion-label>Gender</ion-label>
                        </ion-list-header>
                        <ion-item>
                            <ion-label>Male</ion-label>
                            <ion-radio slot="start" value="male"></ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Female</ion-label>
                            <ion-radio slot="start" value="female"></ion-radio>
                        </ion-item>
                    </ion-radio-group>
                </ion-list>
                <ion-list>
                    <ion-list-header>
                        Approx. age
                    </ion-list-header>
                    <ion-item>
                        <ion-input max="150" min="0" type="number" formControlName="approxAge"></ion-input>
                    </ion-item>
                </ion-list>
                <ion-list>
                    <ion-radio-group formControlName="build">
                        <ion-list-header>
                            <ion-label>Build</ion-label>
                        </ion-list-header>
                        <ion-item>
                            <ion-label>Slim</ion-label>
                            <ion-radio slot="start" value="slim"></ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Proportionate</ion-label>
                            <ion-radio slot="start" value="proportionate"></ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Overweight</ion-label>
                            <ion-radio slot="start" value="overweight"></ion-radio>
                        </ion-item>
                    </ion-radio-group>
                </ion-list>
                <ion-list>
                    <ion-list-header>
                        <ion-label>Height</ion-label>
                    </ion-list-header>
                    <ion-item>
                        <ion-note slot="start">cm</ion-note>
                        <ion-input max="300" min="0" position="stacked" slot="start" type="number"
                            formControlName="height"></ion-input>
                    </ion-item>
                </ion-list>
                <ion-list class="ion-padding-top">
                    <ion-list-header lines="none">
                        Identifying features
                    </ion-list-header>
                    <ion-item>
                        <ion-textarea rows="3" formControlName="identifyingfeatures"
                            placeholder="Tattoos/scars/facial hair etc.">
                        </ion-textarea>
                    </ion-item>
                </ion-list>
                <ion-list class="ion-padding-top">
                    <ion-list-header lines="none">
                        Clothes / Footwear
                    </ion-list-header>
                    <ion-item>
                        <ion-textarea rows="3" formControlName="clothes" placeholder="Clothes, footwear etc.">
                        </ion-textarea>
                    </ion-item>
                </ion-list>
            </div>
        </div>
    </div>
</form>
<ion-button class="ion-margin" expand="block" (click)="addPerson()" slot="end">
    <ion-icon class="ion-padding-end" name="person-add-outline"></ion-icon>
    <ion-label>Add person</ion-label>
</ion-button>